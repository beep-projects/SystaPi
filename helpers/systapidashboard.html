<!--
 Copyright (c) 2022, The beep-projects contributors
 this file originated from https://github.com/beep-projects
 Do not remove the lines above.
 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see https://www.gnu.org/licenses/
-->
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>SystaPi Dashboard</title>
  <style>
    /* Color palette and fonts used */
    @import url(http://fonts.googleapis.com/css?family=Roboto:100,100italic,300,300italic,400,400italic,500,500italic,700,700italic);
     :root {
      --main-grey: rgba(151, 151, 151, 1.0);
      /*#979797*/
      --main-grey-50: rgba(151, 151, 151, 0.5);
      --main-grey-25: rgba(151, 151, 151, 0.25);
      --main-grey-10: rgba(151, 151, 151, 0.1);
      --main-yellow: rgba(255, 226, 0, 1.0);
      /*#ffe200*/
      --main-yellow-50: rgba(255, 226, 0, 0.5);
      --main-yellow-25: rgba(255, 226, 0, 0.25);
      --main-yellow-10: rgba(255, 226, 0, 0.1);
      --main-bg: rgba(151, 151, 151, 1.0);
      /*--main-bg: #303030;*/
      --main-fg: rgba(255, 226, 0, 1.0);
      --secondary-00: rgba(78, 78, 86, 1.0);
      /*#4e4e56*/
      --secondary-01: rgba(105, 105, 112, 1.0);
      /*#696970*/
      --secondary-02: rgba(133, 133, 139, 1.0);
      /*#85858b*/
      --secondary-03: rgba(162, 162, 166, 1.0);
      /*#a2a2a6*/
      --secondary-04: rgba(192, 192, 195, 1.0);
      /*#c0c0c3*/
      --secondary-05: rgba(223, 223, 225, 1.0);
      /*#dfdfe1*/
      --secondary-06: rgba(255, 255, 255, 1.0);
      /*#ffffff*/
      --secondary-07: rgba(255, 250, 221, 1.0);
      /*#fffadd*/
      --secondary-08: rgba(255, 245, 188, 1.0);
      /*#fff5bc*/
      --secondary-09: rgba(255, 240, 153, 1.0);
      /*#fff099*/
      --secondary-10: rgba(255, 235, 118, 1.0);
      /*#ffeb76*/
      --secondary-11: rgba(255, 230, 77), 1.0;
      /*#ffe64d*/
      --secondary-12: rgba(255, 226, 0, 1.0);
      /*#ffe200*/
      --secondary-bg: rgba(78, 78, 86, 1.0);
      /*#4e4e56*/
      --secondary-00-01: rgba(78, 78, 86, 0.1);
      /*#4e4e56*/
      --secondary-01-01: rgba(105, 105, 112, 0.1);
      /*#696970*/
      --secondary-02-01: rgba(133, 133, 139, 0.1);
      /*#85858b*/
      --secondary-03-01: rgba(162, 162, 166, 0.1);
      /*#a2a2a6*/
      --secondary-04-01: rgba(192, 192, 195, 0.1);
      /*#c0c0c3*/
      --secondary-05-01: rgba(223, 223, 225, 0.1);
      /*#dfdfe1*/
      --secondary-06-01: rgba(255, 255, 255, 0.1);
      /*#ffffff*/
      --secondary-07-01: rgba(255, 250, 221, 0.1);
      /*#fffadd*/
      --secondary-08-01: rgba(255, 245, 188, 0.1);
      /*#fff5bc*/
      --secondary-09-01: rgba(255, 240, 153, 0.1);
      /*#fff099*/
      --secondary-10-01: rgba(255, 235, 118, 0.1);
      /*#ffeb76*/
      --secondary-11-01: rgba(255, 230, 77, 0.1);
      /*#ffe64d*/
      --secondary-12-01: rgba(255, 226, 0, 0.1);
      /*#ffe200*/
      --font-size: 14px;
      --font-size-minimal: 10px;
      --font-size-title: 60px;
      --font-size-subtitle: 30px;
    }

    body {
      background: var(--main-bg);
      font-family: Roboto, "Arial black", Arial, Helvetica, sans-serif;
      font-weight: bold;
      margin: 0;
      padding: 0;
    }

    #SystaPiDashboard {
      /* grid container settings */
      display: grid;
      grid-template-columns: 1fr;
      grid-template-rows: 10vh 87vh 3vh;
      grid-template-areas:
        "header"
        "dashboard"
        "footer";
      /*height: 100%;
      max-height: fit-content;
      height: -moz-max-content;*/
    }

    .header {
      grid-area: header;
      height: fit-content;
      /*padding: 10px;*/
      background: var(--main-bg);
      color: var(--main-fg);
      text-align: center;
      justify-content: center;
      display: grid;
      /*align-items: start;*/
      grid-template-columns: 7vw 7vw 7vw 7vw 7vw 25vw 35vw;
      grid-column-gap: 0.1vw;
      grid-template-rows: 10vh;
      grid-template-areas:
        "outsidegauge hotwatergauge logpumpgauge boilerpumpgauge heatingpumpgauge titlebar relaybar";
    }

    #titlebar {
      display: grid;
      /*grid-template-columns: 90px auto 90px;*/
      grid-template-columns: auto 90px min-content 90px auto;
      grid-template-rows: 1fr 1fr;
      grid-template-areas:
        "empty1 logo1 title    logo2 empty2"
        "empty1 logo1 subtitle logo2 empty2";
      grid-column-gap: 5px;
      padding: 0px;
      margin: 0px;
      align-items: center;
      object-fit: cover;
      height: 100%;
      max-height: 100%;
      /*border-radius: 10px;
      border-style: solid;
      border-width: 5px;
      border-color: var(--main-yellow);
      box-shadow: 0 5px 5px 0 rgba(0, 0, 0, .25);*/
    }

    .title {
      grid-area: title;
      /*display: flex;*/
      align-self: end;
      justify-content: center;
      text-align: center;
      font-weight: bolder;
      font-size: var(--font-size-title);
      line-height: 1.0;
      padding: 0px;
      margin: 0px;
      margin-top: 5px;
      /*border-bottom: 2px solid;
      border-radius: 10px;
      box-shadow: 0 5px 5px 0 rgba(0, 0, 0, .25);*/
    }

    .subtitle {
      grid-area: subtitle;
      /*display: flex;*/
      align-self: start;
      justify-content: center;
      text-align: center;
      font-weight: bolder;
      font-size: var(--font-size-subtitle);
      letter-spacing: 0.35em;
      line-height: 0.9;
      margin: 0px;
      margin-right: -0.35em;
      padding: 0px;
      /*border: 1px solid;
      border-style: solid;
      border-width: 1px;*/
    }

    .dashboard {
      grid-area: dashboard;
      display: grid;
      grid-gap: 5px;
      grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
      grid-template-columns: 1fr 1fr 0.55fr 0.45fr;
      grid-template-areas:
        "logboiler circuit   outside outside"
        "logboiler circuit   outside outside"
        "logboiler circuit   outside outside"
        "logboiler circuit   outside outside"
        "logboiler circuit   outside outside"
        "logboiler circuit   outside outside"
        "logboiler circuit   outside outside"
        "logboiler circuit   relay   relay"
        "logboiler circuit   relay   relay"
        "logboiler circuit   relay   relay"
        "buffer    hotwater  relay   relay"
        "buffer    hotwater  relay   relay"
        "buffer    hotwater  status  config"
        "buffer    hotwater  status  config"
        "buffer    hotwater  status  config"
        "buffer    hotwater  status  config"
        "buffer    hotwater  status  config"
        "buffer    hotwater  status  config"
        "buffer    hotwater  status  config"
        "buffer    hotwater  logger  logger";
      background: var(--main-bg);
      padding: 10px;
    }

    .minichart {
      padding: 0px;
      margin: 0px;
      /*border-radius: 10px;
      box-shadow: 0 5px 5px 0 rgba(0, 0, 0, .25);*/
    }

    img {
      padding: 0px;
      margin: 0px;
      /*border-radius: 10px;
      box-shadow: 0 5px 5px 0 rgba(0, 0, 0, .25);*/
    }

    .chart {
      font-size: var(--font-size);
      display: grid;
      grid-template-rows: 20px auto;
      grid-template-columns: 1fr;
      grid-gap: 10px;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 5px 5px 0 rgba(0, 0, 0, .25);
    }

    .chartTitle {
      grid-area: 1 / 1 / 2 / 1;
      height: fit-content;
      padding-left: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(0, 0, 0, .12);
    }

    .chartCanvas {
      grid-area: 2 / 1 / 3 / 1;
      border-top: 1px solid rgba(255, 255, 255, .12);
    }

    .chartCanvasOnly {}

    .statustable td {
      padding-top: 2px;
      padding-bottom: 2px;
      padding-left: 10px;
      padding-right: 10px;
    }

    /* BEGIN charts to be placed on the dashboard */
    /* the id of the React chart element is used for its div id */
    #outside {
      grid-area: outside;
    }

    #buffer {
      grid-area: buffer;
    }

    #circuit {
      grid-area: circuit;
    }

    #hotwater {
      grid-area: hotwater;
    }

    #relay {
      grid-area: relay;
    }

    #logboiler {
      grid-area: logboiler;
    }

    #status {
      grid-area: status;
    }

    #config {
      grid-area: config;
    }

    #outsidegauge {
      grid-area: outsidegauge;
    }

    #hotwatergauge {
      grid-area: hotwatergauge;
    }

    #logpumpgauge {
      grid-area: logpumpgauge;
    }

    #boilerpumpgauge {
      grid-area: boilerpumpgauge;
    }

    #heatingpumpgauge {
      grid-area: heatingpumpgauge;
    }

    #empty1 {
      grid-area: empty1;
    }

    #logo1 {
      grid-area: logo1;
      margin: auto;
    }

    #logo2 {
      grid-area: logo2;
      margin: auto;
    }

    #empty2 {
      grid-area: empty2;
    }

    #relaybar {
      grid-area: relaybar;
      /*align-self: right;*/
    }

    #logger {
      grid-area: logger;
    }

    /* END charts to be placed on the dashboard */

    form {
      display: grid;
      /*grid-template-columns:repeat(7, 1fr);*/
      grid-auto-flow: column;
      grid-column-gap: 10px;
      font-weight: normal;
      align-self: center;
    }

    input[type=text] {
      border: 1px solid var(--main-fg);
      background-color: var(--secondary-bg);
      border-radius: 4px;
    }

    input[type=submit] {
      border: 2px solid var(--main-fg);
      background-color: var(--main-fg);
      border-radius: 4px;
      color: var(--secondary-bg);
    }

    input[type=submit]:active {
      border: 2px solid var(--main-fg);
      background-color: var(--main-bg);
      border-radius: 4px;
      color: var(--secondary-bg);
    }

    button[type=button] {
      border: 2px solid var(--secondary-09);
      background-color: var(--secondary-09);
      border-radius: 4px;
      color: var(--secondary-bg);
    }

    button[type=button]:active {
      border: 2px solid var(--main-fg);
      background-color: var(--main-bg);
      border-radius: 4px;
      color: var(--secondary-bg);
    }

    .footer {
      grid-area: footer;
      height: fit-content;
      padding: 0px;
      color: var(--main-fg);
      font-weight: lighter;
      text-align: center;
    }

    /* unvisited link */
    .footer a:link {
      color: var(--main-fg);
    }

    /* visited link */
    .footer a:visited {
      color: var(--main-fg);
    }

    /* mouse over link */
    .footer a:hover {
      color: var(--main-fg);
    }

    /* selected link */
    .footer a:active {
      color: var(--main-fg);
    }
  </style>
  <!-- Load React. -->
  <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  <!-- Load Chart.js -->
  <!-- chart.js needs a date adapter for displaying time on on the x-axis. Moment.js was the easiest to get working -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment-with-locales.min.js" crossorigin></script>
  <!--script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" crossorigin></script-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.js"
    integrity="sha512-uLlukEfSLB7gWRBvzpDnLGvzNUluF19IDEdUoyGAtaO0MVSBsQ+g3qhLRL3GTVoEzKpc24rVT6X1Pr5fmsShBg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-adapter-moment/1.0.0/chartjs-adapter-moment.min.js"></script>
</head>

<body>
  <div id="SystaPiDashboard"></div>
  <!-- Load the SystaPi component. -->
  <script>
    //get the color pallette from CSS style
    var colorMainGrey = getComputedStyle(document.body).getPropertyValue('--main-grey');
    var colorMainGrey50 = getComputedStyle(document.body).getPropertyValue('--main-grey-50');
    var colorMainGrey25 = getComputedStyle(document.body).getPropertyValue('--main-grey-25');
    var colorMainGrey10 = getComputedStyle(document.body).getPropertyValue('--main-grey-10');
    var colorMainYellow = getComputedStyle(document.body).getPropertyValue('--main-yellow');
    var colorMainYellow50 = getComputedStyle(document.body).getPropertyValue('--main-yellow-50');
    var colorMainYellow25 = getComputedStyle(document.body).getPropertyValue('--main-yellow-25');
    var colorMainYellow10 = getComputedStyle(document.body).getPropertyValue('--main-yellow-10');
    var colorMainBg = getComputedStyle(document.body).getPropertyValue('--main-bg');
    var colorMainFg = getComputedStyle(document.body).getPropertyValue('--main-fg');
    var colorSecondary00 = getComputedStyle(document.body).getPropertyValue('--secondary-00');
    var colorSecondary01 = getComputedStyle(document.body).getPropertyValue('--secondary-01');
    var colorSecondary02 = getComputedStyle(document.body).getPropertyValue('--secondary-02');
    var colorSecondary03 = getComputedStyle(document.body).getPropertyValue('--secondary-03');
    var colorSecondary04 = getComputedStyle(document.body).getPropertyValue('--secondary-04');
    var colorSecondary05 = getComputedStyle(document.body).getPropertyValue('--secondary-05');
    var colorSecondary06 = getComputedStyle(document.body).getPropertyValue('--secondary-06');
    var colorSecondary07 = getComputedStyle(document.body).getPropertyValue('--secondary-07');
    var colorSecondary08 = getComputedStyle(document.body).getPropertyValue('--secondary-08');
    var colorSecondary09 = getComputedStyle(document.body).getPropertyValue('--secondary-09');
    var colorSecondary10 = getComputedStyle(document.body).getPropertyValue('--secondary-10');
    var colorSecondary11 = getComputedStyle(document.body).getPropertyValue('--secondary-11');
    var colorSecondary12 = getComputedStyle(document.body).getPropertyValue('--secondary-12');
    var colorSecondaryBg = getComputedStyle(document.body).getPropertyValue('--secondary-bg');
    var colorSecondary0001 = getComputedStyle(document.body).getPropertyValue('--secondary-00-01');
    var colorSecondary0101 = getComputedStyle(document.body).getPropertyValue('--secondary-01-01');
    var colorSecondary0201 = getComputedStyle(document.body).getPropertyValue('--secondary-02-01');
    var colorSecondary0301 = getComputedStyle(document.body).getPropertyValue('--secondary-03-01');
    var colorSecondary0401 = getComputedStyle(document.body).getPropertyValue('--secondary-04-01');
    var colorSecondary0501 = getComputedStyle(document.body).getPropertyValue('--secondary-05-01');
    var colorSecondary0601 = getComputedStyle(document.body).getPropertyValue('--secondary-06-01');
    var colorSecondary0701 = getComputedStyle(document.body).getPropertyValue('--secondary-07-01');
    var colorSecondary0801 = getComputedStyle(document.body).getPropertyValue('--secondary-08-01');
    var colorSecondary0901 = getComputedStyle(document.body).getPropertyValue('--secondary-09-01');
    var colorSecondary1001 = getComputedStyle(document.body).getPropertyValue('--secondary-10-01');
    var colorSecondary1101 = getComputedStyle(document.body).getPropertyValue('--secondary-11-01');
    var colorSecondary1201 = getComputedStyle(document.body).getPropertyValue('--secondary-12-01');

    //base64 encoded image https://www.base64-image.de/
    var systaPiLogo = "data:image/png;base64,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";

    // global variables and functions //
    var reactKey = 0; //key used as unique key prop for react elements
    var fontSize = getComputedStyle(document.body).getPropertyValue('--font-size');
    var fontSizeMinimal = getComputedStyle(document.body).getPropertyValue('--font-size-minimal');
    var fontSizeTitle = getComputedStyle(document.body).getPropertyValue('--font-size-title');
    var fontSizeSubtitle = getComputedStyle(document.body).getPropertyValue('--font-size-subtitle');

    function arrayAddMaxSize(array, e, maxSize) {
      if (array.length >= maxSize) {
        return [...(array.slice(1)), e];
      }
      return [...(array), e];
    }
    // end global functions //

    class SystaPiDashboard extends React.Component {
      constructor(props) {
        super(props);
        this.lastTimeUpdated = 0;
        this.state = {
          labels: [],
          relay: [],
          logBoilerPumpSpeedActual: undefined,
          boilerPumpSpeedActual: undefined,
          heatingPumpSpeedActual: undefined,
          heatingPumpSpeedActualList: [],
          outsideTemp: undefined,
          outsideTempList: [],
          heatingLimitTempList: [],
          heatingLimitTeampLoweringList: [],
          bufferTempTopList: [],
          bufferTempBottomList: [],
          bufferTempSetList: [],
          bufferTempMaxList: [],
          bufferTempMinList: [],
          circuit1FlowTempList: [],
          circuit1ReturnTempList: [],
          circuit1FlowTempSetList: [],
          hotWaterTemp: undefined,
          hotWaterTempList: [],
          hotWaterTempSetList: [],
          hotWaterTempNormalList: [],
          hotWaterTempComfortList: [],
          hotWaterTempMaxList: [],
          logBoilerFlowTempList: [],
          logBoilerReturnTempList: [],
          logBoilerPumpSpeedActualList: [],
          circulationPumpIsOnList: [],
          heatingPumpIsOnList: [],
          mixer1IsOnWarmList: [],
          mixer1IsOnCoolList: [],
          chargePumpIsOnList: [],
          boilerIsOnList: [],
          burnerStatus: undefined,
          burnerIsOnList: [],
          logBoilderChargePumpIsOnList: [],
          ledBoilerIsOnList: [],
          operationModeName: "",
          circuit1OperationModeName: "",
          hotWaterOperationModeName: "",
          circulationStatus: "",
          circulationOperationModeName: "",
          logBoilerOperationModeName: "",
          boilerOperationModeName: "",
          mixer1StateName: "",
          systemNumberOfStarts: "",
          burnerNumberOfStarts: "",
          boilerOperationTime: "",
          unitName: undefined,
          unitIP: undefined,
          unitVersion: undefined,
          unitBaseVersion: undefined,
          STouchAppSupported: undefined,
          packetsReceived: 0,
          loggingData: undefined,
          logFilesWritten: 0,
          lastDataReceivedAt: undefined,
        };
      }

      fetchData() {
        fetch("http://"+location.host+"/SystaREST/status")
          .then(response => {
            if (response.ok) {
              return response.json();
            } else {
              throw response;
            }
          })
          .then(result => {
            //put it into state, as it should trigger an update of the 
            //whole component
            if (this.lastTimeUpdated < result.timestamp) {
              //this.addData(result.timestamp, result.rawData[4] / 10.0, result.rawData[5] / 10.0, result.rawData[3] / 10.0);
              var ts = new Date(result.timestamp * 1000);
              let relay = result.relay;
              //var ts = new moment(result.timestamp);
              this.setState(prevState => ({
                labels: arrayAddMaxSize(prevState.labels, ts, this.props.maxEntries),
                relay: [...(result.relay.toString(2).padStart(32, "0"))],
                logBoilerPumpSpeedActual: result.logBoilerPumpSpeedActual,
                boilerPumpSpeedActual: result.boilerPumpSpeedActual,
                heatingPumpSpeedActual: result.heatingPumpSpeedActual,
                heatingPumpSpeedActualList: arrayAddMaxSize(prevState.heatingPumpSpeedActualList, result.heatingPumpSpeedActual, this.props.maxEntries),
                outsideTemp: result.outsideTemp,
                outsideTempList: arrayAddMaxSize(prevState.outsideTempList, result.outsideTemp, this.props.maxEntries),
                heatingLimitTempList: arrayAddMaxSize(prevState.heatingLimitTempList, result.heatingLimitTemp, this.props.maxEntries),
                heatingLimitTeampLoweringList: arrayAddMaxSize(prevState.heatingLimitTeampLoweringList, result.heatingLimitTeampLowering, this.props.maxEntries),
                bufferTempSetList: arrayAddMaxSize(prevState.bufferTempSetList, result.bufferTempSet, this.props.maxEntries),
                bufferTempTopList: arrayAddMaxSize(prevState.bufferTempTopList, result.bufferTempTop, this.props.maxEntries),
                bufferTempBottomList: arrayAddMaxSize(prevState.bufferTempBottomList, result.bufferTempBottom, this.props.maxEntries),
                bufferTempMaxList: arrayAddMaxSize(prevState.bufferTempMaxList, result.bufferTempMax, this.props.maxEntries),
                bufferTempMinList: arrayAddMaxSize(prevState.bufferTempMinList, result.bufferTempMin, this.props.maxEntries),
                circuit1FlowTempList: arrayAddMaxSize(prevState.circuit1FlowTempList, result.circuit1FlowTemp, this.props.maxEntries),
                circuit1ReturnTempList: arrayAddMaxSize(prevState.circuit1ReturnTempList, result.circuit1ReturnTemp, this.props.maxEntries),
                circuit1FlowTempSetList: arrayAddMaxSize(prevState.circuit1FlowTempSetList, result.circuit1FlowTempSet, this.props.maxEntries),
                hotWaterTemp: result.hotWaterTemp,
                hotWaterTempList: arrayAddMaxSize(prevState.hotWaterTempList, result.hotWaterTemp, this.props.maxEntries),
                hotWaterTempSetList: arrayAddMaxSize(prevState.hotWaterTempSetList, result.hotWaterTempSet, this.props.maxEntries),
                hotWaterTempNormalList: arrayAddMaxSize(prevState.hotWaterTempNormalList, result.hotWaterTempNormal, this.props.maxEntries),
                hotWaterTempComfortList: arrayAddMaxSize(prevState.hotWaterTempComfortList, result.hotWaterTempComfort, this.props.maxEntries),
                hotWaterTempMaxList: arrayAddMaxSize(prevState.hotWaterTempMaxList, result.hotWaterTempMax, this.props.maxEntries),
                logBoilerFlowTempList: arrayAddMaxSize(prevState.logBoilerFlowTempList, result.logBoilerFlowTemp, this.props.maxEntries),
                logBoilerReturnTempList: arrayAddMaxSize(prevState.logBoilerReturnTempList, result.logBoilerReturnTemp, this.props.maxEntries),
                logBoilerPumpSpeedActualList: arrayAddMaxSize(prevState.logBoilerPumpSpeedActualList, result.logBoilerPumpSpeedActual, this.props.maxEntries),
                circulationPumpIsOnList: arrayAddMaxSize(prevState.circulationPumpIsOnList, (result.circulationPumpIsOn) ? 1 : 0, this.props.maxEntries),
                heatingPumpIsOnList: arrayAddMaxSize(prevState.heatingPumpIsOnList, (result.heatingPumpIsOn) ? 1 : 0, this.props.maxEntries),
                mixer1IsOnWarmList: arrayAddMaxSize(prevState.mixer1IsOnWarmList, (result.mixer1IsOnWarm) ? 1 : 0, this.props.maxEntries),
                mixer1IsOnCoolList: arrayAddMaxSize(prevState.mixer1IsOnCoolList, (result.mixer1IsOnCool) ? 1 : 0, this.props.maxEntries),
                chargePumpIsOnList: arrayAddMaxSize(prevState.chargePumpIsOnList, (result.chargePumpIsOn) ? 1 : 0, this.props.maxEntries),
                boilerIsOnList: arrayAddMaxSize(prevState.boilerIsOnList, (result.boilerIsOn) ? 1 : 0, this.props.maxEntries),
                burnerStatus: (result.burnerIsOn) ? "on" : "off",
                burnerIsOnList: arrayAddMaxSize(prevState.burnerIsOnList, (result.burnerIsOn) ? 1 : 0, this.props.maxEntries),
                logBoilderChargePumpIsOnList: arrayAddMaxSize(prevState.logBoilderChargePumpIsOnList, (result.logBoilderChargePumpIsOn) ? 1 : 0, this.props.maxEntries),
                ledBoilerIsOnList: arrayAddMaxSize(prevState.ledBoilerIsOnList, (result.ledBoilerIsOn) ? 1 : 0, this.props.maxEntries),
                operationModeName: result.operationModeName,
                circuit1OperationModeName: result.circuit1OperationModeName,
                hotWaterOperationModeName: result.hotWaterOperationModeName,
                circulationStatus: (result.circulationPumpIsOn) ? "on" : "off",
                circulationOperationModeName: result.circulationOperationModeName,
                logBoilerOperationModeName: result.logBoilerOperationModeName,
                boilerOperationModeName: result.boilerOperationModeName,
                mixer1StateName: result.mixer1StateName,
                systemNumberOfStarts: result.systemNumberOfStarts,
                burnerNumberOfStarts: result.burnerNumberOfStarts,
                boilerOperationTime: result.boilerOperationTimeHours + "h " + result.boilerOperationTimeMinutes + "m",
              }))
              this.lastTimeUpdated = result.timestamp;
            }
          })
          .catch(error => {
            console.error("Error fetching data: ", error);
          })
          .finally(() => {
            //cleanup?;
          })
      }

      findSystaComfort() {
        fetch("http://"+location.host+"/SystaREST/findsystacomfort")
          .then(response => {
            if (response.ok) {
              return response.json();
            } else {
              throw response;
            }
          })
          .then(result => {
            this.setState(prevState => ({
              unitName: result.unitName,
              unitIP: result.unitIP,
              unitVersion: result.unitVersion,
              unitBaseVersion: result.unitBaseVersion,
              STouchAppSupported: (result.STouchAppSupported) ? "yes" : "no",
            }))
          })
          .catch(error => {
            console.error("Error fetching data: ", error);
          })
          .finally(() => {
            //cleanup?;
          })
      }

      fetchServiceStatus() {
        fetch("http://"+location.host+"/SystaREST/servicestatus")
          .then(response => {
            if (response.ok) {
              return response.json();
            } else {
              throw response;
            }
          })
          .then(result => {
            this.setState(prevState => ({
              lastDataReceivedAt: result.lastDataReceivedAt.slice(11, 19),
              packetsReceived: result.packetsReceived,
              loggingData: (result.loggingData) ? "yes" : "no",
              logFilesWritten: result.logFilesWritten,
            }))
          })
          .catch(error => {
            console.error("Error fetching data: ", error);
          })
          .finally(() => {
            //cleanup?;
          })
      }

      fetchAll() {
        if(this.state.unitIP == null) {
          this.findSystaComfort();
        }
        this.fetchServiceStatus();
        this.fetchData();
      }

      componentDidMount() {
        this.fetchAll();
        //set a timer to periodically update the component
        //the SystaComfort sends new values each minute, so scheduling it with a few seconds should be good enough
        this.timer = setInterval(() => this.fetchAll(), 5000);
      }

      componentWillUnmount() {
        clearInterval(this.timer);
        this.timer = null;
      }

      render() {
        return ([
          React.createElement("div", { className: "header" },
            [React.createElement(Gauge, {
              id: "outsidegauge",
              title: "Outside",
              lineColor: colorMainYellow,
              value: this.state.outsideTemp,
              fontColor: colorMainYellow,
              unit: "\u00B0C",
              minMax: 60,
              minimal: true,
              backgroundColor: colorMainBg,
            }, null),
            React.createElement(Gauge, {
              id: "hotwatergauge",
              title: "Hot Water",
              lineColor: colorMainYellow,
              value: this.state.hotWaterTemp,
              fontColor: colorMainYellow,
              unit: "\u00B0C",
              minMax: 100,
              minimal: true,
              backgroundColor: colorMainBg,
            }, null),
            React.createElement(Gauge, {
              id: "logpumpgauge",
              title: "Log Pump",
              lineColor: colorMainYellow,
              value: this.state.logBoilerPumpSpeedActual,
              fontColor: colorMainYellow,
              unit: "\u0025",
              minMax: 100,
              minimal: true,
              backgroundColor: colorMainBg,
            }, null),
            React.createElement(Gauge, {
              id: "boilerpumpgauge",
              title: "Boiler Pump",
              lineColor: colorMainYellow,
              value: this.state.boilerPumpSpeedActual,
              fontColor: colorMainYellow,
              unit: "\u0025",
              minMax: 100,
              minimal: true,
              backgroundColor: colorMainBg,
            }, null),
            React.createElement(Gauge, {
              id: "heatingpumpgauge",
              title: "Heating Pump",
              lineColor: colorMainYellow,
              value: this.state.heatingPumpSpeedActual,
              fontColor: colorMainYellow,
              unit: "\u0025",
              minMax: 100,
              minimal: true,
              backgroundColor: colorMainBg,
            }, null),
            React.createElement("div", { id: "titlebar" },
              React.createElement("div", { id: "empty1" }, null),
              React.createElement("img", { id: "logo1", src: systaPiLogo, style: { objectFit: "cover", height: "70%", maxHeight: "70%" } }, null),
              React.createElement("div", { className: "title" }, "SYSTA PI"),
              React.createElement("div", { className: "subtitle" }, "DASHBOARD"),
              React.createElement("img", { id: "logo2", src: systaPiLogo, style: { objectFit: "cover", height: "70%", maxHeight: "70%" } }, null),
              React.createElement("div", { id: "empty2" }, null),
            ),
            React.createElement(MixedChart, {
              id: "relaybar",
              title: "Relay",
              types: ["bar"],
              fill: [undefined],
              fillColor: [colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow],
              lineColor: [[colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow, colorMainYellow]],
              dataNames: [["switches"]],
              tooltips: ["?", "?", "?", "?", "?", "?", "?", "?", "?", "?", "?", "?", "?", "?", "?", "?", "?", "?", "LED boiler", "pump log boiler", "?", "?", "boiler", "circulation pump", "charge pump", "?", "mixer cold", "mixer warm", "burner", "?", "?", "heating pump"],
              labels: ["31", "30", "29", "28", "27", "26", "25", "24", "23", "22", "21", "20", "19", "18", "17", "16", "15", "14", "13", "12", "11", "10", "9", "8", "7", "6", "5", "4", "3", "2", "1", "0"],
              data: [this.state.relay],
              yMin: 0,
              yMax: 1,
              minimal: true,
              backgroundColor: colorMainBg,
              gridColor: "rgb(255,255,255)"
            }, null),
            ]),//end header
          React.createElement("div", { className: "dashboard" }, [
            React.createElement(MixedTimeChart, {
              id: "outside",
              title: "Outside Temperature",
              types: ["line", "line", "line"],
              fill: ["origin", "false", "false"],
              fillColor: [colorMainYellow25, colorSecondary01, colorSecondary02],
              lineColor: [colorMainYellow, colorSecondary01, colorSecondary02],
              dataNames: ["Outside Temperature", "Heating Limit normal", "Heating Limit lowering"],
              orders: [0, 1, 2],
              labels: this.state.labels,
              data: [this.state.outsideTempList, this.state.heatingLimitTempList, this.state.heatingLimitTeampLoweringList],
              unit: "\u00B0C",
              yMin: undefined,
              yMax: undefined,
              backgroundColor: colorSecondaryBg,
              gridColor: "rgb(255,255,255)"
            }, null),
            React.createElement(MixedTimeChart, {
              id: "buffer",
              title: "Buffer Temperatures",
              types: ["line", "line", "line", "line", "line"],
              fill: ["+1", "false", "false", "false", "false"],
              fillColor: [colorMainYellow25, colorSecondary09, colorMainGrey, colorSecondary03, colorSecondary01],
              lineColor: [colorMainYellow, colorSecondary09, colorMainGrey, colorSecondary03, colorSecondary01],
              dataNames: ["Buffer Temp Top", "Buffer Temp Bottom", "Buffer Temp Set", "Buffer Temp Max", "Buffer Temp Min"],
              orders: [1, 2, 0, 3, 4],
              labels: this.state.labels,
              data: [this.state.bufferTempTopList, this.state.bufferTempBottomList, this.state.bufferTempSetList, this.state.bufferTempMaxList, this.state.bufferTempMinList],
              unit: "\u00B0C",
              yMin: 0,
              yMax: 100,
              backgroundColor: colorSecondaryBg,
              gridColor: "rgb(255,255,255)"
            }, null),
            React.createElement(MixedTimeChart, {
              id: "circuit",
              title: "Heating Circuit Temperatures",
              types: ["line", "line", "line", "line"],
              fill: ["false", "false", "false", "origin"],
              fillColor: [colorSecondary12, colorSecondary09, colorSecondary04, colorMainGrey10],
              lineColor: [colorSecondary12, colorSecondary09, colorSecondary04, colorMainGrey],
              dataNames: ["Flow Temp", "Return Temp", "Flow Temp Set", "Pump Speed"],
              orders: [1, 2, 0, 3],
              labels: this.state.labels,
              data: [this.state.circuit1FlowTempList, this.state.circuit1ReturnTempList, this.state.circuit1FlowTempSetList, this.state.heatingPumpSpeedActualList],
              unit: "\u00B0C",
              yMin: 0,
              yMax: 100,
              backgroundColor: colorSecondaryBg,
              gridColor: "rgb(255,255,255)"
            }, null),
            React.createElement(MixedTimeChart, {
              id: "hotwater",
              title: "Hot Water Temperatures",
              types: ["line", "line", "line", "line", "line"],
              fill: ["false", "false", "false", "false", "false"],
              fillColor: [colorMainYellow, colorMainGrey, colorSecondary02, colorSecondary04, colorSecondary06],
              lineColor: [colorMainYellow, colorMainGrey, colorSecondary02, colorSecondary04, colorSecondary06],
              dataNames: ["Hot Water Temp", "Hot Water Temp Set", "Hot Water Teamp Normal", "Hot Water Temp Comfort", "Hot Water Temp Max"],
              orders: [1, 0, 2, 3, 4],
              labels: this.state.labels,
              data: [this.state.hotWaterTempList, this.state.hotWaterTempSetList, this.state.hotWaterTempNormalList, this.state.hotWaterTempComfortList, this.state.hotWaterTempMaxList],
              unit: "\u00B0C",
              yMin: 0,
              yMax: 100,
              backgroundColor: colorSecondaryBg,
              gridColor: "rgb(255,255,255)"
            }, null),
            React.createElement(MixedTimeChart, {
              id: "logboiler",
              title: "Log Boiler Information",
              types: ["line", "line", "line"],
              fill: ["false", "false", "origin"],
              fillColor: [colorSecondary12, colorSecondary09, colorMainGrey10],
              lineColor: [colorSecondary12, colorSecondary09, colorMainGrey],
              dataNames: ["Log Boiler Flow Temp", "Log Boiler Return Temp", "Log Boiler Pump Speed"],
              orders: [1, 2, 0],
              labels: this.state.labels,
              data: [this.state.logBoilerFlowTempList, this.state.logBoilerReturnTempList, this.state.logBoilerPumpSpeedActualList],
              unit: "\u00B0C",
              yMin: 0,
              yMax: 100,
              backgroundColor: colorSecondaryBg,
              gridColor: "rgb(255,255,255)"
            }, null),
            React.createElement(MixedTimeChart, {
              id: "relay",
              title: "Relay Switches",
              types: ["line", "line", "line", "line", "line", "line", "line", "line", "line"],
              fill: ["origin", "origin", "origin", "origin", "origin", "origin", "origin", "origin", "origin"],
              fillColor: [colorSecondary0101, colorSecondary0201, colorSecondary0301, colorSecondary0401, colorSecondary0501, colorSecondary0601, colorSecondary0701, colorSecondary1001, colorSecondary1201],
              lineColor: [colorSecondary01, colorSecondary02, colorSecondary03, colorSecondary04, colorSecondary05, colorSecondary06, colorSecondary07, colorSecondary10, colorSecondary12],
              dataNames: ["Circulation Pump", "Heating Pump", "Charge Pump", "Boiler Pump", "LED Boiler", "Mixer Warm", "Mixer Cool", "Boiler", "Burner"],
              labels: this.state.labels,
              data: [this.state.circulationPumpIsOnList, this.state.heatingPumpIsOnList, this.state.chargePumpIsOnList, this.state.logBoilderChargePumpIsOnList, this.state.ledBoilerIsOnList, this.state.mixer1IsOnWarmList, this.state.mixer1IsOnCoolList, this.state.boilerIsOnList, this.state.burnerIsOnList],
              yMin: 0,
              yMax: 1,
              backgroundColor: colorSecondaryBg,
              gridColor: "rgb(255,255,255)"
            }, null),
            React.createElement(Table, {
              id: "status",
              title: "System Status",
              titleColor: "rgb(255,255,255)",
              fontColor: colorMainYellow,
              dataNames: ["Systacomfort", "Circuit 1", "Hot Water", "Circulation", "Burner", "Boiler", "Log Boiler", "Mixer 1", "System Starts", "Burner Starts", "Boiler Operation Time"],
              data: [this.state.operationModeName, this.state.circuit1OperationModeName, this.state.hotWaterOperationModeName, this.state.circulationOperationModeName, this.state.burnerStatus, this.state.boilerOperationModeName, this.state.logBoilerOperationModeName, this.state.mixer1StateName, this.state.systemNumberOfStarts, this.state.burnerNumberOfStarts, this.state.boilerOperationTime, this.state.boilerOperationTimeMinutes],
              backgroundColor: colorSecondaryBg,
            }, null),
            React.createElement(Table, {
              id: "config",
              title: "System Info",
              titleColor: "rgb(255,255,255)",
              fontColor: colorMainYellow,
              dataNames: ["Unit Name", "Unit IP", "Version", "Base Version", "S-Touch", "Pakets received", "logging", "# Log Files", "Last Data"],
              data: [this.state.unitName, this.state.unitIP, this.state.unitVersion, this.state.unitBaseVersion, this.state.STouchAppSupported, this.state.packetsReceived, this.state.loggingData, this.state.logFilesWritten, this.state.lastDataReceivedAt],
              backgroundColor: colorSecondaryBg,
            }, null),
            React.createElement(Form, {
              id: "logger",
              title: undefined,
              minimal: false,
              titleColor: "rgb(255,255,255)",
              labelColor: "rgb(255,255,255)",
              inputColor: colorMainYellow,
              inputLabels: ["Prefix", "Delimiter", "# Entries"],
              inputNames: ["filePrefix", "logEntryDelimiter", "entriesPerFile"],
              inputDefaults: ["SystaREST", ";", 60],
              inputWidth: [15, 1, 3],
              buttonLabels: [["log", "stop"],["del"],["zip"]],
              state: this.state.loggingData,
              onComplete: this.fetchServiceStatus.bind(this),
              urls: [["http://"+location.host+"/SystaREST/enablelogging", "http://"+location.host+"/SystaREST/disablelogging"], ["http://"+location.host+"/SystaREST/deletealllogs"], ["http://"+location.host+"/SystaREST/getalllogs"]],
              methods: [["PUT", "PUT"], ["DELETE"], ["URL"]],
              backgroundColor: colorSecondaryBg,
            }, null),
          ]),
          React.createElement("div", { className: "footer" },
            "\xA9 2022 ", React.createElement("a", { href: "https://github.com/beep-projects/SystaPi" }, "beep-projects"))
        ]);
      }

    } //SystaPiDashboard

    class MixedTimeChart extends React.Component {
      constructor(props) {
        super(props);
        this.key = reactKey++;
        this.chartRef = React.createRef();
        var props = this.props;
      }

      componentDidUpdate() {
        this.myChart.data.labels = this.props.labels;
        for (let i = 0; i < this.props.data.length; i++) {
          this.myChart.data.datasets[i].data = this.props.data[i];
        }
        this.myChart.update();
      }

      componentDidMount() {
        let numOfLines = this.props.data.length;
        let datasetsArray = [];
        for (let i = 0; i < numOfLines; i++) {
          datasetsArray.push({
            type: this.props.types[i],
            label: this.props.dataNames[i],
            data: [],
            fill: this.props.fill[i],
            showLine: true,
            order: (this.props.orders != null) ? this.props.orders[i] : 0,
            pointRadius: 0,
            backgroundColor: this.props.fillColor[i],
            borderColor: this.props.lineColor[i],
            borderWidth: 2,
            borderCapStyle: "round",
            borderJoinStyle: "round",
            tension: 0.4
          });
        }

        this.myChart = new Chart(this.chartRef.current, {
          //type: 'line',
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                type: 'time',
                time: {
                  //parser: timeFormat,
                  unit: 'minute',
                  //minUnit: 'minute',
                  stepSize: 1,
                  displayFormats: {
                    'minute': 'HH:mm',
                    'hour': 'HH:mm'
                  }
                },
                grid: {
                  color: "grey",
                  borderDash: [1, 1]
                },
                ticks: {
                  minRotation: 0,
                  maxRotation: 0,
                  autoSkip: true,
                  major: {
                    enabled: true
                  },
                  //source: "data",
                  //stepSize: 60,
                  //textStrokeColor: "green",
                  textStrokeWidth: 0,
                  color: "white",
                  font: {
                    family: "Roboto, 'Arial black', Arial, Helvetica, sans-serif",
                    //family: "'Playfair Display', Didot, 'Times New Roman', Times, serif",
                    weight: "normal",
                    size: (this.props.minimal) ? fontSizeMinimal : fontSize
                  }
                }
              },
              y: {
                min: this.props.yMin,
                max: this.props.yMax,
                suggestedMin: this.props.yMin,
                suggestedMax: this.props.yMax,
                grid: {
                  color: "grey",
                  borderDash: [1, 1]
                },
                ticks: {
                  source: "data",
                  stepSize: 10,
                  //backdropColor: "red",
                  //showLabelBackdrop: true,
                  textStrokeColor: "green",
                  textStrokeWidth: 0,
                  color: "white",
                  font: {
                    family: "Roboto, 'Arial black', Arial, Helvetica, sans-serif",
                    weight: "normal",
                    size: (this.props.minimal) ? "10px" : "14px"
                  },
                },
                afterTickToLabelConversion: (function (ax) {
                  if (this.props.unit != null) {
                    for (var tick in ax.ticks) {
                      ax.ticks[tick].label += " " + this.props.unit;
                    }
                  }
                }).bind(this)
              }
            },
            plugins: {
              legend: {
                ...(this.props.minimal) && { display: false },
                labels: {
                  color: "white",
                  boxHeight: 2,
                }
              }
            }
          },
          data: {
            labels: [],
            datasets: datasetsArray
          }
        });
      }

      render() {
        if (this.props.minimal) {
          return React.createElement("div", { key: this.key, id: this.props.id, className: "minichart", style: { backgroundColor: this.props.backgroundColor } },
            React.createElement("canvas", { ref: this.chartRef }));
        } else {
          return React.createElement("div", { key: this.key, id: this.props.id, className: "chart", style: { backgroundColor: this.props.backgroundColor } }, [
            React.createElement("div", { className: "chartTitle", style: { color: this.props.gridColor } }, this.props.title),
            React.createElement("div", { className: "chartCanvas" },
              React.createElement("canvas", { ref: this.chartRef })
            )
          ]);
        }
      }
    }

    class MixedChart extends React.Component {
      constructor(props) {
        super(props);
        this.key = reactKey++;
        this.chartRef = React.createRef();
      }

      componentDidUpdate() {
        this.myChart.data.labels = this.props.labels;
        for (let i = 0; i < this.props.data.length; i++) {
          this.myChart.data.datasets[i].data = this.props.data[i];
        }
        this.myChart.update();
      }

      componentDidMount() {
        let numOfLines = this.props.data.length;
        let datasetsArray = [];
        for (let i = 0; i < numOfLines; i++) {
          datasetsArray.push({
            type: this.props.types[i],
            label: this.props.dataNames[i],
            data: [],
            fill: this.props.fill[i],
            showLine: true,
            pointRadius: 0,
            backgroundColor: this.props.fillColor[i],
            borderColor: this.props.lineColor[i],
            borderWidth: 2,
            borderCapStyle: "round",
            borderJoinStyle: "round",
            tension: 0.4
          });
        }

        this.myChart = new Chart(this.chartRef.current, {
          //type: 'line',
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                grid: {
                  color: "grey",
                  borderDash: [1, 1]
                },
                ticks: {
                  display: true,
                  //mirror: true,
                  maxRotation: 0,
                  minRotation: 0,
                  padding: -2,
                  //align: "end",
                  z: 1,
                  major: {
                    enabled: true
                  },
                  stepSize: 1,
                  autoSkip: false,
                  source: "data",
                  textStrokeColor: "green",
                  textStrokeWidth: 0,
                  color: "white",
                  font: {
                    family: "Roboto, 'Arial black', Arial, Helvetica, sans-serif",
                    //family: "'Playfair Display', Didot, 'Times New Roman', Times, serif",
                    weight: "normal",
                    size: (this.props.minimal) ? fontSizeMinimal : fontSize
                  }
                }
              },
              y: {
                min: this.props.yMin,
                max: this.props.yMax,
                suggestedMin: this.props.yMin,
                suggestedMax: this.props.yMax,
                grid: {
                  display: false,
                  color: "grey",
                  borderDash: [1, 1]
                },
                ticks: {
                  display: false,
                  source: "data",
                  //stepSize: 10,
                  //backdropColor: "red",
                  //showLabelBackdrop: true,
                  textStrokeColor: "green",
                  textStrokeWidth: 0,
                  color: "white",
                  font: {
                    family: "Roboto, 'Arial black', Arial, Helvetica, sans-serif",
                    //family: "'Playfair Display', Didot, 'Times New Roman', Times, serif",
                    weight: "normal",
                    size: (this.props.minimal) ? fontSizeMinimal : fontSize
                  },
                },
              }
            },
            plugins: {
              tooltip: {
                callbacks: {
                  label: function (tooltipItem) {
                    let label = this.props.tooltips[tooltipItem.parsed.x] || "";
                    return label;
                  }.bind(this)
                }
              },
              legend: {
                ...(this.props.minimal) && { display: false },
                labels: {
                  color: "white",
                  boxHeight: 2,
                }
              }
            },
          },
          data: {
            labels: [],
            datasets: datasetsArray
          }
        });
      }

      render() {
        if (this.props.minimal) {
          return React.createElement("div", { key: this.key, id: this.props.id, className: "minichart", style: { backgroundColor: this.props.backgroundColor } },
            React.createElement("canvas", { ref: this.chartRef }));
        } else {
          return React.createElement("div", { key: this.key, id: this.props.id, className: "chart", style: { backgroundColor: this.props.backgroundColor } }, [
            React.createElement("div", { className: "chartTitle", style: { color: this.props.gridColor } }, this.props.title),
            React.createElement("div", { className: "chartCanvas" },
              React.createElement("canvas", { ref: this.chartRef })
            )
          ]);
        }
      }
    }

    class Gauge extends React.Component {
      constructor(props) {
        super(props);
        this.key = reactKey++;
        this.chartRef = React.createRef();
      }

      componentDidUpdate() {
        let value = this.props.value;
        this.myChart.options.plugins.valueLabel.value = value;
        this.myChart.data.datasets[0].data = (value >= 0) ? [this.props.minMax, value, (this.props.minMax - value)] : [(this.props.minMax + value), -value, this.props.minMax];
        this.myChart.update();
      }

      componentDidMount() {
        let datasetsArray = [];
        datasetsArray.push({
          //label: this.props.name,
          data: [],
          backgroundColor: [this.props.backgroundColor, this.props.lineColor, this.props.backgroundColor],
          borderColor: [this.props.backgroundColor, this.props.lineColor, this.props.backgroundColor],
          borderWidth: 2,
          //borderCapStyle: "round",
          //borderJoinStyle: "round",
        });

        this.myChart = new Chart(this.chartRef.current, {
          type: 'doughnut',
          data: {
            datasets: datasetsArray,
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: "90%",
            rotation: 90, // start angle in degrees
            circumference: 360, // sweep angle in degrees
            plugins: {
              valueLabel: {
                value: this.props.value,
                //fontSize: this.props.fontSize,
                fontColor: this.props.fontColor,
                unit: this.props.unit,
                title: this.props.title
              }
            }
          },
          plugins: [{
            id: "valueLabel",
            afterDraw(chart, args, options) {
              const { ctx, chartArea: { top, right, bottom, left, width, height } } = chart;
              ctx.save();
              ctx.font = "30px sans-serif";
              ctx.textAlign = "center";
              ctx.textBaseline = 'middle';
              ctx.fillStyle = options.fontColor;
              let text = (options.value == null) ? "- " + options.unit : options.value + " " + options.unit;
              let placeholder = "-88.8 " + options.unit;
              let metrics = ctx.measureText(placeholder);
              let innerRadius = chart.getDatasetMeta(0).controller.innerRadius;//chart.DoughnutController.prototype.innerRadius;
              var sidePaddingCalculated = 0.1 * (innerRadius * 2)
              var stringWidth = metrics.width;
              var elementWidth = (innerRadius * 2) - sidePaddingCalculated;
              var widthRatio = elementWidth / stringWidth;
              var newFontSize = Math.floor(30 * widthRatio);
              var elementHeight = (innerRadius * 2);
              var fontSizeToUse = Math.min(newFontSize, elementHeight);
              var centerX = ((chart.chartArea.left + chart.chartArea.right) / 2);
              var centerY = ((chart.chartArea.top + chart.chartArea.bottom) / 2);
              ctx.font = fontSizeToUse + "px " + " sans-serif";
              ctx.fillText(text, centerX, centerY);
              //let lineHeight = metrics.fontBoundingBoxAscent + metrics.fontBoundingBoxDescent;
              let lineHeight = metrics.fontBoundingBoxAscent; //main text should have no descent, e.g. 55.2 C
              //let lineHeight = metrics.actualBoundingBoxDescent + 3;
              ctx.font = Math.round(0.7 * fontSizeToUse) + "px " + " sans-serif";
              ctx.fillText(options.title, centerX, centerY + lineHeight);
            }
          }]
        });
      }

      render() {
        if (this.props.minimal) {
          return React.createElement("div", { key: this.key, id: this.props.id, className: "minichart", style: { backgroundColor: this.props.backgroundColor } },
            React.createElement("canvas", { ref: this.chartRef }));
        } else {
          return React.createElement("div", { key: this.key, id: this.props.id, className: "chart", style: { backgroundColor: this.props.backgroundColor } }, [
            React.createElement("div", { className: "chartTitle", style: { color: this.props.gridColor } }, this.props.title),
            React.createElement("div", { className: "chartCanvas" },
              React.createElement("canvas", { ref: this.chartRef })
            )
          ]);
        }
      }
    }

    class Table extends React.Component {
      constructor(props) {
        super(props);
        this.key = reactKey++;
        this.tableRef = React.createRef();
      }

      renderTableData() {
        let rows = [];
        for (let i = 0; i < this.props.data.length; i++) {
          rows.push(
            React.createElement("tr", null,
              React.createElement("td", { style: { color: this.props.titleColor, fontFamily: "Roboto, 'Arial black', Arial, Helvetica, sans-serif", fontWeight: "normal", fontSize: (this.props.minimal) ? fontSizeMinimal : fontSize } }, this.props.dataNames[i]),
              React.createElement("td", { style: { color: this.props.fontColor, fontFamily: "Roboto, 'Arial black', Arial, Helvetica, sans-serif", fontWeight: "normal", fontSize: (this.props.minimal) ? fontSizeMinimal : fontSize } }, this.props.data[i])
            )
          )
        }
        return rows;
      }

      render() {
        if (this.props.minimal) {
          return React.createElement("div", { id: this.props.id, className: "minichart", style: { backgroundColor: this.props.backgroundColor } },
            React.createElement("table", { ref: this.tableRef, className: "statustable" },
              React.createElement("tbody", null,
                this.renderTableData()
              )
            ));
        } else {
          return React.createElement("div", { id: this.props.id, className: "chart", style: { backgroundColor: this.props.backgroundColor } }, [
            React.createElement("div", { className: "chartTitle", style: { color: this.props.titleColor } }, this.props.title),
            React.createElement("div", { className: "chartCanvas" },
              React.createElement("table", { ref: this.tableRef, className: "statustable" },
                React.createElement("tbody", null,
                  this.renderTableData()
                )
              )
            )
          ]);
        }
      }
    }

    class Form extends React.Component {
      constructor(props) {
        super(props);
        this.key = reactKey++;
        this.tableRef = React.createRef();
        let entries = this.props.inputNames.map((name, i) => [name, this.props.inputDefaults[i]]);
        this.state = Object.fromEntries(entries);
        this.changeInput = this.changeInput.bind(this);
        this.submit = this.submit.bind(this);
      }

      renderInputs() {
        let rows = [];
        for (let i = 0; i < this.props.inputNames.length; i++) {
          rows.push(
            React.createElement("label", { style: { color: this.props.labelColor } }, this.props.inputLabels[i])
          );
          rows.push(
            React.createElement("input", {
              type: "text",
              name: this.props.inputNames[i],
              defaultValue: this.state[this.props.inputNames[i]],
              size: this.props.inputWidth[i],
              style: { color: this.props.inputColor },
              onChange: this.changeInput
            }),
          );
        }
        return rows;
      }

      renderButtons() {
        let i = (this.props.state && (this.props.state == true || this.props.state.toLowerCase() == "yes")) ? 1 : 0;
        //create the buttons, submit button is mandatory
        let buttons = [React.createElement("input", { type: "submit", value: this.props.buttonLabels[0][i]})];
        //add additional buttos if defined
        for(let b=1;b<this.props.buttonLabels.length;b++) {
          buttons.push(React.createElement("button", { type: "button", onClick: this.buttonAction.bind(this, b)}, this.props.buttonLabels[b][0]));
        }
        return buttons;
      }

      render() {
        let form = React.createElement("form", { ref: this.tableRef, className: "form", onSubmit: this.submit },
                    this.renderInputs(),
                    this.renderButtons()
                  );
        if (this.props.minimal) {
          return React.createElement("div", { id: this.props.id, className: "minichart", style: { backgroundColor: this.props.backgroundColor } },
            form
          );
        } else if (!this.props.title) {
          return React.createElement("div", { id: this.props.id, className: "chart", style: { backgroundColor: this.props.backgroundColor } },
            React.createElement("div", { className: "chartCanvasOnly" },
              form
            )
          );
        } else {
          return React.createElement("div", { id: this.props.id, className: "chart", style: { backgroundColor: this.props.backgroundColor } },
            React.createElement("div", { className: "chartTitle", style: { color: this.props.titleColor } }, this.props.title),
            React.createElement("div", { className: "chartCanvas" },
              form
            )
          );
        }
      }

      submit(e) {
        e.preventDefault();
        let url = new URL(this.props.urls[0][0]);
        let method = this.props.methods[0][0];
        if (document.activeElement.value == this.props.buttonLabels[0][1]) {
          url = new URL(this.props.urls[0][1]);
          method = this.props.methods[0][1];
        }
        const params = this.state;
        url.search = new URLSearchParams(params);
        fetch(url, {
            method: method,
          }).catch((error) => {
            console.error('Error fetching data:', error);
        });
        if (this.props.onComplete != null) {
            this.props.onComplete();
        }
      }

      buttonAction(i) {
        let url = new URL(this.props.urls[i][0]);
        let method = this.props.methods[i][0];
        if(method.toUpperCase() == "URL") {
          window.location.href = url;
          return;
        }
        url.search = new URLSearchParams();
        fetch(url, {
            method: method,
          }).then(response => {
            if (response.ok) {
              /* blob = response.blob();
              console.log(blob);
              
              console.log(response);
              let arrayBuffers = blob.arrayBuffer();
              let newBlob = new Blob(arrayBuffers, {type: blob.type});
              const url = URL.createObjectURL(newBlob);
              console.log(url);
              const link = document.createElement("a");
              link.href = url;
              link.download = "SystaLogs.zip";
              console.log("link: "+link);
              document.body.appendChild(link);
              link.click();
              document.body.removeChild(link);
              URL.revokeObjectURL(url);*/
              //return response.json();
            } else {
              throw response;
            }
          })/*.then(result => {
            this.setState(prevState => ({
              unitName: result.unitName,
              unitIP: result.unitIP,
              unitVersion: result.unitVersion,
              unitBaseVersion: result.unitBaseVersion,
              STouchAppSupported: (result.STouchAppSupported) ? "yes" : "no",
            }))
          })*/
          .catch(error => {
            console.error("Error fetching data: ", error);
          })
          .finally(() => {
            //cleanup?;
          });
        if (this.props.onComplete != null) {
            this.props.onComplete();
        }
      }

      changeInput(e) {
        this.setState({ [e.target.name]: e.target.value });
      }
    }

    const domContainer = document.querySelector('#SystaPiDashboard');
    //the SystaComfort sends new values each minute data of the last 24h are the 24 * 60 = 1440
    ReactDOM.render(React.createElement(SystaPiDashboard, { maxEntries: 1440 }), domContainer);

  </script>
</body>

</html>
